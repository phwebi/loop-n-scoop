pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

p_sprite_start=16
p_sprite_end=20
anim_wait=2
angular_speed = 1.2

p = {}
p.a = 0 -- angle from center of pond
p.x = 0
p.y = 0
p.sprite = p_sprite_start
p.timer = 0
p.flip = false
p.ccw = false

function _init()
  -- draw black pixels
  palt(0, false)
 
  -- don't draw red pixels
  palt(8, true)
end

function update_player_angle()
  if (btn(0)) then
    p.a=p.a+angular_speed
    p.ccw = true
    p.timer+=1
  end

  if (btn(1)) then
    p.a=p.a-angular_speed
    p.ccw = false
    p.timer+=1
  end
  
  if (p.a > 360 or p.a < -360) then
    p.a = 0
  end

  if p.timer > anim_wait then
    p.sprite+=1
    p.timer = 0
  end

  if p.sprite > p_sprite_end then
    p.sprite = p_sprite_start
  end
end

function 

function _update()
  update_player_angle()
end

function _draw()
  map(0,0,0,0,16,16)
  circfill(63,63,55,12)
  -- pset(63,63,0)
  
  p.x=63 + 59 * cos(p.a/360) - 3
  p.y=63 + 59 * sin(p.a/360) - 3
		p.flip =
		  (p.y > 63 and not p.ccw) or
		  (p.y <= 63 and p.ccw)

  spr(p.sprite,p.x,p.y,1,1,p.flip)
end
__gfx__
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777677770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777767770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888888888888888888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88111188881111888811118888111188881111880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
81111118811111188111111881111118811111180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
81177718811777188117771881177718811777180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
81109018811090188110901881109018811090180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
81177718811779988117799889977718819977180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88998998889988888998888888888998888889980000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888888888888888888888888888888888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
